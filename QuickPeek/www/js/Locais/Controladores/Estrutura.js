'use strict';

angular.module('QuickPeek.Estrutura.Locais', [
    'RB.gcs',
    'RB.config',
    'RB.pagina',
    'RB.validacoesPadroes',
    'QuickPeek.Requisicao.Locais'
])

.factory('LocaisEstrutura', ['$timeout','Config','Pagina','VP','LocaisRequisicoes',
    function($timeout,Config,Pagina,VP,LocaisRequisicoes) {
    var scope;  
    
    function setScope(obj){
        scope = obj;
        scope.busy = false;
        return this;
    }
    
    function popular(){
        scope.dados = {};
        
        if(DGlobal.locais && DGlobal.locais.success){
            scope.locais = DGlobal.locais.dados;
        }
        
        //scope.locais = [{"dados":{"localId":"20677","localNome":"Rubeus Tecnologia e Inovação","localEndereco":"Rua Doutor Silveira Brun, 86 - sala 302, Muriaé","latitude":"-21.131764","longitude":"-42.364326","cidade":null,"distancia":"0.013913447282072009","relevancia":"21420","relevancia2":null,"checkIn":"1","visibilidadeCheckIn":"1","publicar":"1","perguntar":"1"},"hashtags":[{"hashtagId":"1","hashtagTitulo":"Rodízio","hashtagQtd":"6","categoriaId":"10","categoriaEndereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek//file/imagem/2.jpeg","jaCurtiu":"0"},{"hashtagId":"165","hashtagTitulo":"Cale queima rosca","hashtagQtd":"1","categoriaId":"10","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/donkey.svg","jaCurtiu":"0"}],"midias":[{"id":"10020","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek/file/imagemmidia/2017_02_08_10_03_57_3824354461-origem.png","momento":"2017-02-08 10:03:59"}],"pessoas":[{"usuarioId":"3","visibilidade":"3","usuarioNome":"Tamanduá azarado","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/anteater.svg","visibilidadeId":"3","localId":"20677","count":"6.3","count2":"0.3","minutos":"34367","seguindo":"0","seguirId":null},{"usuarioId":"10118","visibilidade":"1","usuarioNome":"Carlos Henrique","endereco":null,"visibilidadeId":"1","localId":"20677","count":"0.7","count2":"0.0","minutos":"198","seguindo":"0","seguirId":null},{"usuarioId":"10110","visibilidade":"1","usuarioNome":"Marcelo Castro","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek/file/imagemperfil/2017_02_06_17_37_25_2672597463-origem.png","visibilidadeId":"1","localId":"20677","count":"0.7","count2":"0.0","minutos":"3977","seguindo":"0","seguirId":null}],"qtdPerguntas":"11","qtdMidias":"1","qtdPessoas":"3"},{"dados":{"localId":"20681","localNome":"Banco Mercantil do Brasil","localEndereco":"Rua Doutor Silveira Brun, 60, Muriaé","latitude":"-21.1319694","longitude":"-42.3643937","cidade":null,"distancia":"0.00998762650148901","relevancia":"20829.077749222175","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"1","perguntar":"1"},"hashtags":[{"hashtagId":"160","hashtagTitulo":"Cale","hashtagQtd":"5","categoriaId":"10","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/panda.svg","jaCurtiu":"0"},{"hashtagId":"162","hashtagTitulo":"Huehehshs","hashtagQtd":"3","categoriaId":"10","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/panda.svg","jaCurtiu":"0"},{"hashtagId":"109","hashtagTitulo":"oi","hashtagQtd":"2","categoriaId":"10","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/panda.svg","jaCurtiu":"0"},{"hashtagId":"164","hashtagTitulo":"Otimo","hashtagQtd":"2","categoriaId":"2","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/65.svg","jaCurtiu":"0"},{"hashtagId":"161","hashtagTitulo":"Digão está aqui","hashtagQtd":"1","categoriaId":"5","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/68.svg","jaCurtiu":"0"},{"hashtagId":"163","hashtagTitulo":"Calekkhvf","hashtagQtd":"1","categoriaId":"10","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/panda.svg","jaCurtiu":"0"},{"hashtagId":"3","hashtagTitulo":"DoseDupla","hashtagQtd":"1","categoriaId":"1","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/64.svg","jaCurtiu":"0"},{"hashtagId":"37","hashtagTitulo":"GenteEstranhaNaVizinhança","hashtagQtd":"1","categoriaId":"5","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/68.svg","jaCurtiu":"0"},{"hashtagId":"39","hashtagTitulo":"BrigaNaPorta","hashtagQtd":"1","categoriaId":"5","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/68.svg","jaCurtiu":"0"},{"hashtagId":"34","hashtagTitulo":"FuiAssaltada","hashtagQtd":"1","categoriaId":"5","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/68.svg","jaCurtiu":"0"},{"hashtagId":"28","hashtagTitulo":"AcabaramOsIngressos","hashtagQtd":"1","categoriaId":"4","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/67.svg","jaCurtiu":"0"},{"hashtagId":"31","hashtagTitulo":"Movimentado","hashtagQtd":"1","categoriaId":"4","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/67.svg","jaCurtiu":"0"},{"hashtagId":"58","hashtagTitulo":"FilaTranquila","hashtagQtd":"1","categoriaId":"8","categoriaEndereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/categorias-hashtag/71.svg","jaCurtiu":"0"}],"midias":[{"id":"10019","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek/file/imagemmidia/2017_02_03_16_59_40_9927848910-origem.png","momento":"2017-02-03 16:59:41"},{"id":"10018","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek/file/imagemmidia/2017_02_03_16_59_14_1081772035-origem.png","momento":"2017-02-03 16:59:15"}],"pessoas":[{"usuarioId":"10107","visibilidade":"3","usuarioNome":"Burro clandestino","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/donkey.svg","visibilidadeId":"3","localId":"20681","count":"17.4","count2":"0.0","minutos":"4446","seguindo":"0","seguirId":null},{"usuarioId":"10106","visibilidade":"3","usuarioNome":"Panda manco","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/panda.svg","visibilidadeId":"3","localId":"20681","count":"14.9","count2":"0.0","minutos":"8488","seguindo":"0","seguirId":null},{"usuarioId":"10111","visibilidade":"3","usuarioNome":"Pato sensível","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/duck.svg","visibilidadeId":"3","localId":"20681","count":"8.7","count2":"0.0","minutos":"3969","seguindo":"0","seguirId":null}],"qtdPerguntas":"3","qtdMidias":"2","qtdPessoas":"3"},{"dados":{"localId":"20936","localNome":"Carliteias","localEndereco":"R. Dr. Silveira Brun, 70, Muriaé - MG, 36880-000, Brazil","latitude":"-21.1318843","longitude":"-42.3643629","cidade":"Muriaé","distancia":"0","relevancia":"10867.184597366233","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"1","perguntar":"1"},"hashtags":false,"midias":false,"pessoas":[{"usuarioId":"10115","visibilidade":"2","usuarioNome":"Panda manco","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/panda.svg","visibilidadeId":"2","localId":"20936","count":"1.4","count2":"0.0","minutos":"1235","seguindo":"0","seguirId":null},{"usuarioId":"10112","visibilidade":"3","usuarioNome":"Ratazana formosa","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/mouse-2.svg","visibilidadeId":"3","localId":"20936","count":"0.7","count2":"0.0","minutos":"1424","seguindo":"0","seguirId":null},{"usuarioId":"10117","visibilidade":"3","usuarioNome":"Búfalo gentil","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/buffalo.svg","visibilidadeId":"3","localId":"20936","count":"0.7","count2":"0.0","minutos":"1180","seguindo":"0","seguirId":null}],"qtdPerguntas":"0","qtdMidias":"0","qtdPessoas":"4"},{"dados":{"localId":"5964","localNome":"Arte Mineira","localEndereco":"RUA CORONEL LUCIANO ALVES PEREIRA Nº140 - BELISÁRIO, Muriaé","latitude":"-20.922932","longitude":"-42.451897","cidade":null,"distancia":"24.947537068896608","relevancia":"5.642336868804379","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"7395","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/6.jpg","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"5595","visibilidade":"2","usuarioNome":"Tamanduá azarado","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/anteater.svg","visibilidadeId":"2","localId":"5964","count":"0.7","count2":"0.1","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"9649","visibilidade":"2","usuarioNome":"Castor manco","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/beaver.svg","visibilidadeId":"2","localId":"5964","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"4004","visibilidade":"2","usuarioNome":"Tamanduá azarado","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/anteater.svg","visibilidadeId":"2","localId":"5964","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"5","qtdMidias":"1","qtdPessoas":"4"},{"dados":{"localId":"5968","localNome":"Igrejas e Templos","localEndereco":"Muriaé","latitude":"-20.9268471","longitude":"-42.4565095","cidade":null,"distancia":"24.723772718352","relevancia":"4.673668329420302","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"9592","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/4.png","momento":"2017-01-05 15:36:43"},{"id":"3272","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/1.png","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"7839","visibilidade":"2","usuarioNome":"Morcego caçador","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bat.svg","visibilidadeId":"2","localId":"5968","count":"0.7","count2":"0.1","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"2","qtdMidias":"2","qtdPessoas":"1"},{"dados":{"localId":"1411","localNome":"Associação Comunitária de Comunicação de Mora","localEndereco":"Rua Laura Souza, 18, Santana de Cataguases","latitude":"-21.2855378","longitude":"-42.5556119","cidade":null,"distancia":"26.171857054743846","relevancia":"4.491379100898883","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"925","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/4.png","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"8940","visibilidade":"2","usuarioNome":"Morcego caçador","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bat.svg","visibilidadeId":"2","localId":"1411","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"8057","visibilidade":"2","usuarioNome":"Castor manco","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/beaver.svg","visibilidadeId":"2","localId":"1411","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"2","qtdMidias":"1","qtdPessoas":"2"},{"dados":{"localId":"1412","localNome":"Auto Posto Santana","localEndereco":"Rodovia Santana Cataguases - s/n, Santana de Cataguases","latitude":"-21.2897687","longitude":"-42.5527617","cidade":null,"distancia":"26.260698694676968","relevancia":"4.396232965065148","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"8556","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/6.jpg","momento":"2017-01-05 15:36:43"},{"id":"6717","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/6.jpg","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"10004","visibilidade":"2","usuarioNome":"Tamanduá azarado","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/anteater.svg","visibilidadeId":"2","localId":"1412","count":"0.7","count2":"0.1","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"1","qtdMidias":"2","qtdPessoas":"1"},{"dados":{"localId":"1409","localNome":"Poliesportivo","localEndereco":"Santana de Cataguases","latitude":"-21.2864673","longitude":"-42.5544032","cidade":null,"distancia":"26.144857942950495","relevancia":"3.693148757365539","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":false,"pessoas":[{"usuarioId":"8975","visibilidade":"2","usuarioNome":"Castor manco","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/beaver.svg","visibilidadeId":"2","localId":"1409","count":"0.7","count2":"0.1","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"1","qtdMidias":"0","qtdPessoas":"1"},{"dados":{"localId":"5963","localNome":"Pousada GAB","localEndereco":"Rua Coronel Luciano Alves Pereira, 900, Muriaé","latitude":"-20.9266923","longitude":"-42.4570106","cidade":null,"distancia":"24.759800365855074","relevancia":"3.309229426365495","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"8040","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/2.jpeg","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"1289","visibilidade":"2","usuarioNome":"Morcego caçador","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bat.svg","visibilidadeId":"2","localId":"5963","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"9554","visibilidade":"2","usuarioNome":"Castor manco","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/beaver.svg","visibilidadeId":"2","localId":"5963","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"6899","visibilidade":"3","usuarioNome":"Urso Viril","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bear.svg","visibilidadeId":"3","localId":"5963","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"0","qtdMidias":"1","qtdPessoas":"3"},{"dados":{"localId":"5960","localNome":"EM Profa Ionyr Bastos Dias","localEndereco":"Av Sta Catarina, 75 - Vale Verde, Muriaé","latitude":"-20.9264191","longitude":"-42.4575978","cidade":null,"distancia":"24.811506182755167","relevancia":"3.3023280780559943","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"6018","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/5.png","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"6613","visibilidade":"3","usuarioNome":"Urso Viril","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bear.svg","visibilidadeId":"3","localId":"5960","count":"0.7","count2":"0.3","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"4911","visibilidade":"1","usuarioNome":"Clara","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek//file/imagem/9.jpg","visibilidadeId":"1","localId":"5960","count":"0.7","count2":"0.1","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"9972","visibilidade":"1","usuarioNome":"Augusto","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek//file/imagem/4.png","visibilidadeId":"1","localId":"5960","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"2","qtdMidias":"1","qtdPessoas":"3"},{"dados":{"localId":"5966","localNome":"Pousada Lapa Grande","localEndereco":"Rua Rubens Belisário","latitude":"-20.922932","longitude":"-42.4518968","cidade":null,"distancia":"24.947529509373457","relevancia":"3.115918320729746","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"6390","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/2.jpeg","momento":"2017-01-05 15:36:43"},{"id":"6980","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/5.png","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"4898","visibilidade":"1","usuarioNome":"Clara","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek//file/imagem/10.jpg","visibilidadeId":"1","localId":"5966","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"1","qtdMidias":"2","qtdPessoas":"1"},{"dados":{"localId":"5961","localNome":"Cartório Pimentel","localEndereco":"Rua Coronel Luciano Alves Pereira, 642, Muriaé","latitude":"-20.9264417","longitude":"-42.45738","cidade":null,"distancia":"24.800383532483846","relevancia":"2.456679757679537","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"6924","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/5.png","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"1081","visibilidade":"3","usuarioNome":"Morcego caçador","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bat.svg","visibilidadeId":"3","localId":"5961","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"3802","visibilidade":"3","usuarioNome":"Urso Viril","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bear.svg","visibilidadeId":"3","localId":"5961","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"2","qtdMidias":"1","qtdPessoas":"2"},{"dados":{"localId":"5962","localNome":"Escola Municipal Professora Ionyr Bastos Dias","localEndereco":"Avenida Santa Catarina, 75 - Vale Verde, Muriaé","latitude":"-20.9267952","longitude":"-42.4577341","cidade":null,"distancia":"24.77852738550723","relevancia":"2.374058129524539","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":[{"id":"2557","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/3.jpg","momento":"2017-01-05 15:36:43"},{"id":"8700","endereco":"HTTP://172.17.0.2/Quickpeek//file/imagem/9.jpg","momento":"2017-01-05 15:36:43"}],"pessoas":[{"usuarioId":"4321","visibilidade":"1","usuarioNome":"Diego","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek//file/imagem/8.jpg","visibilidadeId":"1","localId":"5962","count":"0.7","count2":"0.0","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"0","qtdMidias":"2","qtdPessoas":"1"},{"dados":{"localId":"5967","localNome":"José C Gomes","localEndereco":"Rua Cel Luciano Alves Pereira, 713","latitude":"-20.922932","longitude":"-42.4518968","cidade":null,"distancia":"24.947529509373457","relevancia":"2.357992242714402","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":false,"pessoas":[{"usuarioId":"2210","visibilidade":"1","usuarioNome":"Clara","endereco":"HTTP://192.168.0.121:8000/QuickPeek/quickpeek//file/imagem/6.jpg","visibilidadeId":"1","localId":"5967","count":"0.7","count2":"0.2","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"2","qtdMidias":"0","qtdPessoas":"1"},{"dados":{"localId":"1410","localNome":"Escola karate fritz EKF","localEndereco":"Rua Jácomo Mariquito, 2-172, Santana de Cataguases","latitude":"-21.285574","longitude":"-42.5551827","cidade":null,"distancia":"26.140799097181507","relevancia":"2.3286540868730228","relevancia2":null,"checkIn":"0","visibilidadeCheckIn":null,"publicar":"0","perguntar":"1"},"hashtags":false,"midias":false,"pessoas":[{"usuarioId":"6509","visibilidade":"2","usuarioNome":"Urso Viril","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/bear.svg","visibilidadeId":"2","localId":"1410","count":"0.7","count2":"0.2","minutos":"50227","seguindo":"0","seguirId":null},{"usuarioId":"9780","visibilidade":"2","usuarioNome":"Tamanduá azarado","endereco":"http://192.168.0.121:8000/QuickPeek/quickpeek/ui/imagens/avatares/anteater.svg","visibilidadeId":"2","localId":"1410","count":"0.7","count2":"0.1","minutos":"50227","seguindo":"0","seguirId":null}],"qtdPerguntas":"0","qtdMidias":"0","qtdPessoas":"2"}]
        
        if(DGlobal.dadosUsuario && DGlobal.dadosUsuario.success){
            scope.dadosUser = DGlobal.dadosUsuario.dados;
        }
        
        $timeout(function(){
            montaHashtags();
        },0);
    };
    
    function montaHashtags(){
        if(scope.locais  && scope.locais.length){
            for(var i = 0; i < scope.locais.length;i++){
                scope.locais[i].linhasHashs = montaLinhasHashs(scope.locais[i].hashtags);
            }
        }
    }
    
    function montaLinhasHashs(array){
        var contHash = 0;
//        var linhaHash = new Array();
        var objHashs = new Array();
//        for(var i = 0; i < array.length; i++){
//            contHash++;
//            linhaHash.push(array[i]);
//            if(contHash == 3 || (contHash != 3 && i == array.length - 1)){
//                objHashs.push(linhaHash);
//                linhaHash = new Array();
//                contHash = 0;
//            }
//        }

        var arrays = {};
        arrays['1'] = new Array();
        arrays['2'] = new Array();
        arrays['3'] = new Array();
        for(var i = 0; i < array.length; i++){
            contHash++;
            arrays[contHash].push(array[i]);
            if(contHash == 3 || (contHash != 3 && i == array.length - 1)){
                contHash = 0;
            }
        }
        
        objHashs.push(arrays['1']);
        objHashs.push(arrays['2']);
        objHashs.push(arrays['3']);
        return objHashs;
    }
  
    return {
        setScope:setScope,
        popular:popular,
        montaHashtags:montaHashtags
    };
 }]);
